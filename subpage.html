<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SafetyHelp | Subpage Template</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    /* Custom Styles to match about.html and community.html aesthetics */
    body {
      font-family: 'Montserrat', sans-serif; /* Matching font from about.html */
      background-color: #E8F0FE; /* Matching background from about.html */
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: #007BFF; /* Blue from about.html */
      color: #fff;
      padding: 0.8rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .logo-container { display: flex; align-items: center; color: #fff; }
    .logo { font-weight: 700; font-size: 1.75rem; letter-spacing: -0.025em; }
    .logo .help { font-weight: 900; color: #FF8C00; } /* Orange from about.html */
    nav { display: flex; gap: 0.5rem; }
    nav a {
      color: white;
      font-weight: 500;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      transition: background-color 0.3s ease, transform 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid transparent;
    }
    nav a:hover, nav a.active-nav-link {
      background-color: rgba(255,255,255,0.15);
      transform: translateY(-2px);
      border-color: rgba(255,255,255,0.3);
    }
    nav a .nav-icon { font-size: 0.9em; }
    .search-language { display: flex; align-items: center; gap: 1rem; }
    .search-language input, .search-language select {
      padding: 0.6rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-family: 'Montserrat', sans-serif;
      background-color: #fff; /* Ensure select background is white */
      color: #333; /* Ensure select text is dark */
    }

    .page-title-section {
      background: #F3F4F6; /* Light grey from about.html */
      padding: 1.5rem 2rem;
      text-align: center;
      border-bottom: 1px solid #e0e0e0;
      flex-shrink: 0;
    }
    .page-title-section h1 { font-size: 2.2rem; color: #1f2937; margin-bottom: 0.5rem; }
    .page-title-section p.subtitle { font-size: 1rem; color: #374151; max-width: 800px; margin-left: auto; margin-right: auto; }

    .page-content-container {
      display: flex;
      flex-grow: 1;
      overflow: hidden; /* Important for scrolling content */
    }
    .container-grid { /* Renamed to avoid conflict if 'container' is a Tailwind class */
      display: grid;
      grid-template-columns: 1fr 3fr 1fr; /* Sidebar-Main-Sidebar layout */
      flex-grow: 1;
      overflow: hidden;
      min-height: 0; /* Crucial for grid item scrolling */
      gap: 1rem;
      padding: 1rem;
    }

    .sidebar-tools, .sidebar-milestones {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
      overflow: hidden; /* For scrolling list */
    }
    .sidebar-heading {
      font-size: 1.2rem;
      font-weight: 700;
      color: #007BFF;
      padding: 1rem;
      border-bottom: 1px solid #e5e7eb;
      background-color: #f9f9f9;
      flex-shrink: 0;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .sidebar-heading .heading-icon { color: #FF8C00; }
    .sidebar-list-container {
        flex-grow: 1;
        overflow-y: auto; /* Enable scrolling for lists */
        position: relative;
    }
    .sidebar-tools ul, .sidebar-milestones ul { list-style: none; padding: 0; margin: 0; }
    .sidebar-tools li, .sidebar-milestones li {
      padding: 0;
      border-bottom: 1px solid #e5e7eb;
      cursor: pointer;
      display: flex;
    }
    .sidebar-tools li a, .sidebar-milestones li {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 0.9rem;
      padding: 0.85rem 1rem;
      width: 100%;
      transition: background-color 0.3s ease;
      color: #333;
    }
    .sidebar-tools li a:hover, .sidebar-milestones li:hover { background: #e8f0fe; }
    .sidebar-tools li a .list-icon, .sidebar-milestones li .list-icon {
        color: #007BFF;
        font-size: 1em;
        width: 20px;
        text-align: center;
    }

    .main-subpage-content {
      padding: 1.5rem;
      overflow-y: auto; /* Main content area scrolls */
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .main-subpage-content section { margin-bottom: 2.5rem; }
    .main-subpage-content h2 {
        font-size: 1.8rem;
        color: #0056b3; /* Darker blue */
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #FF8C00; /* Orange accent */
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    .main-subpage-content h2 .section-icon { color: #FF8C00; }
    .main-subpage-content p, .main-subpage-content li { font-size: 1rem; line-height: 1.7; color: #374151; margin-bottom: 1rem; }
    .main-subpage-content ul { list-style: disc; padding-left: 20px; }

    /* Legal Obligations Styling */
    .legal-obligation-item details summary {
      cursor: pointer;
      font-weight: 600;
      padding: 0.5rem;
      background-color: #f9f9f9;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .legal-obligation-item details summary::after {
      content: '\\f078'; /* Font Awesome chevron-down */
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      transition: transform 0.2s ease-in-out;
    }
    .legal-obligation-item details[open] summary::after {
      transform: rotate(180deg);
    }
    .legal-obligation-item details div {
      padding: 1rem;
      border: 1px solid #e0e0e0;
      border-top: none;
      border-radius: 0 0 4px 4px;
      background-color: #fff;
    }
    .legal-obligation-item details div a { color: #007BFF; text-decoration: underline; }
    .legal-obligation-item details div a:hover { color: #0056b3; }

    /* Buttons */
    .action-button {
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        font-weight: 500;
        transition: background-color 0.3s ease, transform 0.2s ease;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        text-align: center;
        cursor: pointer;
    }
    .action-button-primary { background-color: #007BFF; color: white; }
    .action-button-primary:hover { background-color: #0056b3; transform: translateY(-2px); }
    .action-button-secondary { background-color: #FF8C00; color: white; }
    .action-button-secondary:hover { background-color: #e07b00; transform: translateY(-2px); }
    .nav-buttons { margin-top: 1.5rem; display: flex; justify-content: space-between; }

    /* Wizard Steps Styling */
    .wizard-step { border: 1px solid #e0e0e0; border-radius: 8px; padding: 1.5rem; margin-top: 1.5rem; background-color: #f9fafb; }
    .wizard-step h3 { font-size: 1.5rem; color: #111827; margin-bottom: 1rem; }
    .form-group { margin-bottom: 1rem; }
    .form-group label { display: block; font-weight: 500; margin-bottom: 0.25rem; color: #374151; }
    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group input[type="tel"],
    .form-group input[type="number"],
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.6rem 0.8rem;
      border: 1px solid #D1D5DB;
      border-radius: 6px;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.95rem;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      border-color: #007BFF;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
      outline: none;
    }
     .form-group .checkbox-group label { display: inline-block; margin-right: 1rem; font-weight: normal;}


    footer {
      background: #343a40; /* Dark grey from about.html */
      color: #adb5bd;
      text-align: center;
      padding: 1.5rem 2rem;
      font-size: 0.9rem;
      flex-shrink: 0;
      border-top: 3px solid #FF8C00; /* Orange accent */
    }
    footer p { margin-bottom: 0.5rem; }
    footer a { color: #FF8C00; transition: color 0.3s ease; }
    footer a:hover { color: #fff; }

    /* Modal Styles (from about.html) */
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); padding-top: 60px; }
    .modal-content { background-color: #fefefe; margin: 5% auto; padding: 25px; border: 1px solid #888; width: 80%; max-width: 600px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); position: relative; }
    .modal-header { padding-bottom: 10px; border-bottom: 1px solid #eee; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
    .modal-header h4 { margin: 0; font-size: 1.4rem; color: #007BFF; }
    .close-btn { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s; }
    .close-btn:hover, .close-btn:focus { color: #333; text-decoration: none; }
    .modal-body p { font-size: 1rem; line-height: 1.6; margin-bottom: 1rem; }
    .modal-footer { padding-top: 15px; border-top: 1px solid #eee; margin-top: 20px; text-align: right; }
    .modal-footer button { background-color: #6c757d; color:white; border:none; padding: 0.7rem 1.3rem; border-radius:6px; cursor:pointer; }
    .modal-footer button:hover { background-color: #5a6268; }

    /* Chatbot Styles (from about.html) */
    .chatbot-container { position: fixed; bottom: 20px; right: 20px; z-index: 1050; }
    #chat-toggle { background-color: #FF8C00; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 1.8rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s ease, transform 0.3s ease; }
    #chat-toggle:hover { background-color: #e07b00; transform: scale(1.1); }
    #chat-window { width: 320px; max-height: 450px; background-color: #fff; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); display: flex; flex-direction: column; overflow: hidden; transition: opacity 0.3s ease, transform 0.3s ease; position: absolute; bottom: 75px; right: 0; opacity: 0; transform: translateY(10px); pointer-events: none; }
    #chat-window.chat-expanded { opacity: 1; transform: translateY(0); pointer-events: auto; }
    .chat-hidden { display: none !important; } /* Ensure hidden is effective */
    #chat-header { background-color: #007BFF; color: white; padding: 10px 15px; font-weight: 600; border-top-left-radius: 10px; border-top-right-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
    #chat-header .close-chat-btn { background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; }
    #chat-output { flex-grow: 1; padding: 15px; overflow-y: auto; font-size: 0.9rem; background-color: #f9f9f9; }
    #chat-output p { margin-bottom: 0.8rem; line-height: 1.4; }
    #chat-output p strong { color: #007BFF; }
    #chat-output p strong:first-child { color: #FF8C00; }
    #chat-input-container { display: flex; border-top: 1px solid #eee; padding: 10px; background-color: #fff; }
    #chat-input { flex-grow: 1; padding: 0.7rem; border: 1px solid #ddd; border-radius: 6px; margin-right: 8px; font-family: 'Montserrat', sans-serif; }
    #chat-send { background-color: #007BFF; color: white; padding: 0.7rem 1rem; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; transition: background-color 0.3s ease; }
    #chat-send:hover { background-color: #0056b3; }

    /* Hide elements by default */
    .hidden { display: none; }

    /* Responsive adjustments */
    @media (max-width: 1024px) { /* Adjust for tablets and smaller */
      .container-grid {
        grid-template-columns: 1fr; /* Stack main content and sidebars */
      }
      .sidebar-tools, .sidebar-milestones {
        max-height: 300px; /* Limit height when stacked */
        margin-bottom: 1rem;
      }
       main.main-subpage-content {
        order: -1; /* Show main content first on smaller screens */
      }
    }
    @media (max-width: 768px) { /* Adjust for mobile */
        header { flex-direction: column; gap: 0.5rem; padding: 0.8rem 1rem; }
        nav { flex-wrap: wrap; justify-content: center; }
        .search-language { width: 100%; justify-content: space-between; }
        .search-language input { flex-grow: 1; }
        .page-title-section h1 { font-size: 1.8rem; }
        .page-title-section p.subtitle { font-size: 0.9rem; }
    }

  </style>
</head>
<body>
  <header>
    <a href="/SafetyHelp/index.html" class="logo-container">
        <div class="logo">Safety<span class="help">Help</span></div>
    </a>
    <nav>
      <a href="/SafetyHelp/index.html"><i class="fas fa-home nav-icon"></i>Home</a>
      <a href="/SafetyHelp/resources.html"><i class="fas fa-book nav-icon"></i>Resources</a>
      <a href="/SafetyHelp/services.html"><i class="fas fa-concierge-bell nav-icon"></i>Services</a>
      <a href="/SafetyHelp/community.html"><i class="fas fa-users nav-icon"></i>Community</a>
      <a href="/SafetyHelp/about.html"><i class="fas fa-info-circle nav-icon"></i>About</a>
      <a href="/SafetyHelp/contact.html"><i class="fas fa-envelope nav-icon"></i>Contact</a>
      <a href="/SafetyHelp/login.html"><i class="fas fa-sign-in-alt nav-icon"></i>SignUp / Login</a>
    </nav>
    <div class="search-language">
      <input type="text" placeholder="Search..." class="p-2 border rounded-md">
      <select class="p-2 border rounded-md bg-white text-gray-700">
        <option>English</option>
        <option>isiXhosa</option>
        <option>Afrikaans</option>
        </select>
    </div>
  </header>

  <div class="page-title-section">
    <h1 id="subpage-title">Subpage Module Title</h1>
    <p class="subtitle" id="subpage-subtitle">A brief description of what this module offers and its importance.</p>
  </div>

  <div class="page-content-container">
    <div class="container-grid">
      <aside class="sidebar-tools">
        <h3 class="sidebar-heading"><i class="fas fa-tools heading-icon"></i>SafetyHelp Tools</h3>
        <div class="sidebar-list-container">
          <ul id="safetyhelp-tools-list">
            <li><a href="/SafetyHelp/pages/construction-compliance.html" data-detail="Comprehensive safety management for construction projects."><i class="fas fa-hard-hat list-icon"></i>Construction Safety</a></li>
            <li><a href="/SafetyHelp/pages/emergency-response-plan.html" data-detail="Develop effective emergency plans."><i class="fas fa-bell list-icon"></i>Emergency Planning</a></li>
            <li><a href="/SafetyHelp/pages/risk-assessment.html" data-detail="Identify and control workplace hazards."><i class="fas fa-shield-alt list-icon"></i>Risk Assessment</a></li>
            <li><a href="/SafetyHelp/pages/legal-appointments.html" data-detail="Manage OHS legal appointments."><i class="fas fa-gavel list-icon"></i>Legal Appointments</a></li>
            <li><a href="/SafetyHelp/pages/incident-management.html" data-detail="Report and investigate incidents."><i class="fas fa-file-medical-alt list-icon"></i>Incident Management</a></li>
            <li><a href="/SafetyHelp/pages/training.html" data-detail="Access OHS training programs."><i class="fas fa-graduation-cap list-icon"></i>Training</a></li>
            <li><a href="/SafetyHelp/pages/inspections-audits.html" data-detail="Conduct workplace inspections and audits."><i class="fas fa-clipboard-check list-icon"></i>Inspections & Audits</a></li>
            <li><a href="/SafetyHelp/pages/suppliers.html" data-detail="Manage supplier OHS compliance."><i class="fas fa-truck list-icon"></i>Suppliers</a></li>
            <li><a href="/SafetyHelp/pages/legislation.html" data-detail="Stay updated with OHS legislation."><i class="fas fa-balance-scale list-icon"></i>Legislation</a></li>
            <li><a href="/SafetyHelp/pages/community-tools.html" data-detail="Engage with the OHS community."><i class="fas fa-users list-icon"></i>Community Tools</a></li>
            <li><a href="/SafetyHelp/member-dashboard.html" data-detail="Your personalized OHS dashboard."><i class="fas fa-tachometer-alt list-icon"></i>Member Dashboard</a></li>
            <li><a href="/SafetyHelp/pages/ohs-system.html" data-detail="Build a comprehensive OHS system."><i class="fas fa-cogs list-icon"></i>OHS System Modules</a></li>
          </ul>
        </div>
      </aside>

      <main class="main-subpage-content">
        <section id="introduction-section">
          <h2><i class="fas fa-info-circle section-icon"></i>Introduction to [Module Name]</h2>
          <p>This module provides comprehensive tools and resources for [briefly explain module purpose, e.g., managing construction compliance, conducting risk assessments]. Understanding and implementing these practices is crucial for ensuring a safe and healthy work environment in line with South African OHS legislation.</p>
          <p>Here, you can learn about your legal duties, access relevant documents, and utilize our wizards to streamline your OHS processes.</p>
        </section>

        <section id="legal-obligations-section">
          <h2><i class="fas fa-balance-scale section-icon"></i>Key Legal Obligations</h2>
          <p>Below are some of the key legal obligations relevant to [Module Name]. Click on each item to expand and see more details, including legislative references and links.</p>
          <div class="legal-obligation-item">
            <details>
              <summary>Obligation 1: [Brief Title of Obligation]</summary>
              <div>
                <p><strong>Detailed Explanation:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                <p><strong>Legal Reference:</strong> Occupational Health and Safety Act, No. 85 of 1993, Section X(Y).</p>
                <p><a href="#" target="_blank" rel="noopener noreferrer">Link to relevant legislation/guideline</a></p>
              </div>
            </details>
          </div>
          <div class="legal-obligation-item">
            <details>
              <summary>Obligation 2: [Brief Title of Obligation]</summary>
              <div>
                <p><strong>Detailed Explanation:</strong> Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                <p><strong>Legal Reference:</strong> Construction Regulations, 2014, Regulation Z.</p>
                <p><a href="#" target="_blank" rel="noopener noreferrer">Link to relevant legislation/guideline</a></p>
              </div>
            </details>
          </div>
          </section>

        <section id="interaction-choice-section">
          <h2><i class="fas fa-cogs section-icon"></i>How Would You Like to Proceed?</h2>
          <p>Choose how you want to interact with the [Module Name] tools. You can use our automated wizard for a guided experience or manually select the specific documents and tools you need.</p>
          <div class="flex flex-col sm:flex-row gap-4 mt-4">
            <button id="show-wizard-btn" class="action-button action-button-primary flex-1">
              <i class="fas fa-magic mr-2"></i>Automated Wizard
            </button>
            <button id="show-manual-btn" class="action-button action-button-secondary flex-1">
              <i class="fas fa-tasks mr-2"></i>Manual Selection
            </button>
          </div>
        </section>

        <section id="automated-wizard-section" class="hidden">
          <h2><i class="fas fa-magic section-icon"></i>Automated Wizard: [Module Name]</h2>
          <p>Follow the steps below to generate your [Module Name] documents and plans.</p>

          <div id="wizard-step-1" class="wizard-step">
            <h3>Step 1: Select Your Role</h3>
            <div class="form-group">
              <label for="user-role">Your Role:</label>
              <select id="user-role" name="user-role" class="p-2 border rounded-md w-full">
                <option value="">-- Select Role --</option>
                <option value="client">Client</option>
                <option value="contractor">Contractor</option>
                <option value="employer">Employer</option>
                <option value="employee">Employee</option>
                <option value="ohs_professional">OHS Professional</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="nav-buttons">
              <button class="action-button action-button-primary wizard-next-btn">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-2" class="wizard-step hidden">
            <h3>Step 2: Your Details</h3>
            <div class="form-group"><label for="user-name">Full Name:</label><input type="text" id="user-name" name="user-name" class="p-2 border rounded-md w-full"></div>
            <div class="form-group"><label for="user-email">Email:</label><input type="email" id="user-email" name="user-email" class="p-2 border rounded-md w-full"></div>
            <div class="form-group"><label for="user-phone">Phone Number:</label><input type="tel" id="user-phone" name="user-phone" class="p-2 border rounded-md w-full"></div>
            <div class="nav-buttons">
              <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
              <button class="action-button action-button-primary wizard-next-btn">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-3" class="wizard-step hidden">
            <h3>Step 3: Site/Project Details</h3>
            <div class="form-group"><label for="project-name">Project Name:</label><input type="text" id="project-name" name="project-name" class="p-2 border rounded-md w-full"></div>
            <div class="form-group"><label for="site-location">Site Location/Address:</label><input type="text" id="site-location" name="site-location" class="p-2 border rounded-md w-full"></div>
            <div class="nav-buttons">
                <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
                <button class="action-button action-button-primary wizard-next-btn">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-4" class="wizard-step hidden">
            <h3>Step 4: Select Documents/Actions</h3>
            <p id="role-specific-options-placeholder">Based on your role as a [Selected Role], you can compile the following: (This content will be dynamic based on role and module).</p>
            <div id="client-options" class="hidden">
              <h4>Client Options:</h4>
              <div class="form-group checkbox-group">
                <input type="checkbox" id="compile-ohs-specs" name="client_docs" value="ohs_specs"><label for="compile-ohs-specs">Compile OHS Specifications</label><br>
                <input type="checkbox" id="compile-baseline-risk" name="client_docs" value="baseline_risk"><label for="compile-baseline-risk">Compile Baseline Risk Assessment</label><br>
                <input type="checkbox" id="compile-notification-work" name="client_docs" value="notification_work"><label for="compile-notification-work">Compile Notification of Construction Work</label><br>
                <input type="checkbox" id="compile-mandatory-agreement" name="client_docs" value="mandatory_agreement"><label for="compile-mandatory-agreement">Compile Mandatory Agreement (Section 37(2))</label><br>
                <input type="checkbox" id="compile-contractor-appointment" name="client_docs" value="contractor_appointment"><label for="compile-contractor-appointment">Compile Contractor Appointment Letter</label><br>
              </div>
            </div>
             <div id="contractor-options" class="hidden">
              <h4>Contractor Options:</h4>
              <div class="form-group checkbox-group">
                <input type="checkbox" id="compile-hs-plan" name="contractor_docs" value="hs_plan"><label for="compile-hs-plan">Compile Health & Safety Plan</label><br>
                <input type="checkbox" id="compile-hs-file" name="contractor_docs" value="hs_file"><label for="compile-hs-file">Compile Health & Safety File</label><br>
                <input type="checkbox" id="compile-subcontractor-specs" name="contractor_docs" value="subcontractor_specs"><label for="compile-subcontractor-specs">Compile Specifications for Subcontractors</label><br>
              </div>
            </div>
            <div class="form-group mt-4">
                <label for="compiling-for">Compiling for:</label>
                <select id="compiling-for" name="compiling-for" class="p-2 border rounded-md w-full">
                    <option value="self">Myself / My Company</option>
                    <option value="another">Another Party</option>
                </select>
            </div>
            <div id="another-party-details" class="form-group hidden mt-2">
                <label for="another-party-name">Other Party's Name/Company:</label>
                <input type="text" id="another-party-name" name="another-party-name" class="p-2 border rounded-md w-full">
            </div>
            <div class="nav-buttons">
                <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
                <button class="action-button action-button-primary wizard-next-btn">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-5" class="wizard-step hidden">
            <h3>Step 5: Provide Information for Selected Documents</h3>
            <p id="document-fields-placeholder">Please fill in the required details for the documents you've selected. (This section will dynamically show forms based on selections).</p>
            <div class="nav-buttons">
                <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
                <button class="action-button action-button-primary wizard-next-btn">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-6" class="wizard-step hidden">
            <h3>Step 6: Review Your Document(s)</h3>
            <p id="document-preview-placeholder">Here's a preview of your generated document(s). Please review carefully. (This will show a summary or a link to a preview).</p>
            <div class="nav-buttons">
                <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
                <button class="action-button action-button-primary wizard-next-btn">Next <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-7" class="wizard-step hidden">
            <h3>Step 7: Final Compilation Details</h3>
             <div class="form-group">
                <label for="confirm-compiling-for">Confirm who this document is for:</label>
                <input type="text" id="confirm-compiling-for-name" name="confirm-compiling-for-name" class="p-2 border rounded-md w-full" placeholder="Name of person/company document is for">
            </div>
            <div class="form-group">
                <label for="chso-agent-name">Certified CHSO/Agent Name (if applicable):</label>
                <input type="text" id="chso-agent-name" name="chso-agent-name" class="p-2 border rounded-md w-full">
            </div>
            <div class="form-group">
                <label for="chso-agent-reg">CHSO/Agent Registration Number:</label>
                <input type="text" id="chso-agent-reg" name="chso-agent-reg" class="p-2 border rounded-md w-full">
            </div>
            <div class="nav-buttons">
                <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
                <button class="action-button action-button-primary wizard-next-btn">Proceed to Checkout <i class="fas fa-arrow-right ml-2"></i></button>
            </div>
          </div>

          <div id="wizard-step-8" class="wizard-step hidden">
            <h3>Step 8: Checkout & Document Generation</h3>
            <p>Your documents are ready for generation. Please proceed to checkout.</p>
            <button id="generate-document-btn" class="action-button action-button-primary mt-4"><i class="fas fa-file-pdf mr-2"></i>Generate Document(s)</button>
            <div class="nav-buttons">
                <button class="action-button action-button-secondary wizard-prev-btn"><i class="fas fa-arrow-left mr-2"></i>Back</button>
            </div>
          </div>
        </section>

        <section id="manual-selection-section" class="hidden">
          <h2><i class="fas fa-tasks section-icon"></i>Manual Selection: [Module Name]</h2>
          <p>Select the specific documents or tools you need for [Module Name].</p>
          <div id="manual-options-list" class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div class="border p-4 rounded-lg shadow hover:shadow-md transition-shadow">
              <h4 class="font-semibold text-lg mb-2 text-blue-600">Compile OHS Plan</h4>
              <p class="text-sm text-gray-600 mb-3">Manually create a detailed Occupational Health and Safety Plan for your project.</p>
              <button class="action-button action-button-secondary w-full manual-select-item-btn" data-item="ohs_plan">Select</button>
            </div>
            <div class="border p-4 rounded-lg shadow hover:shadow-md transition-shadow">
              <h4 class="font-semibold text-lg mb-2 text-blue-600">Compile Baseline Risk Assessment</h4>
              <p class="text-sm text-gray-600 mb-3">Develop a comprehensive baseline risk assessment for your site.</p>
              <button class="action-button action-button-secondary w-full manual-select-item-btn" data-item="baseline_risk_assessment">Select</button>
            </div>
             </div>

          <div id="manual-item-form-section" class="wizard-step hidden mt-6">
            <h3 id="manual-item-title">Provide Details for [Selected Item]</h3>
            <div id="manual-item-form-placeholder">
                <p>Please fill in the required details for the selected document/tool.</p>
            </div>
            <div class="form-group">
                <label for="manual-compiling-for">Compiling for:</label>
                <select id="manual-compiling-for" name="manual-compiling-for" class="p-2 border rounded-md w-full">
                    <option value="self">Myself / My Company</option>
                    <option value="another">Another Party</option>
                </select>
            </div>
            <div id="manual-another-party-details" class="form-group hidden mt-2">
                <label for="manual-another-party-name">Other Party's Name/Company:</label>
                <input type="text" id="manual-another-party-name" name="manual-another-party-name" class="p-2 border rounded-md w-full">
            </div>
             <div class="form-group">
                <label for="manual-chso-agent-name">Certified CHSO/Agent Name (if applicable):</label>
                <input type="text" id="manual-chso-agent-name" name="manual-chso-agent-name" class="p-2 border rounded-md w-full">
            </div>
            <div class="form-group">
                <label for="manual-chso-agent-reg">CHSO/Agent Registration Number:</label>
                <input type="text" id="manual-chso-agent-reg" name="manual-chso-agent-reg" class="p-2 border rounded-md w-full">
            </div>
            <div class="nav-buttons">
                <button id="manual-form-back-btn" class="action-button action-button-secondary"><i class="fas fa-arrow-left mr-2"></i>Back to Options</button>
                <button id="manual-generate-document-btn" class="action-button action-button-primary">Generate Document <i class="fas fa-file-alt ml-2"></i></button>
            </div>
          </div>
        </section>

      </main>

      <aside class="sidebar-milestones">
        <h3 class="sidebar-heading"><i class="fas fa-flag-checkered heading-icon"></i>OHS Milestones</h3>
        <div class="sidebar-list-container">
          <ul id="ohs-milestones-list">
            <li data-detail="Ancient Egyptians used linen strips to bind wounds, an early form of first aid."><i class="fas fa-landmark list-icon"></i>3000 BC: Early First Aid (Egypt)</li>
            <li data-detail="SA OHS Act No. 85 of 1993 established modern safety responsibilities."><i class="fas fa-landmark list-icon"></i>1993: OHS Act (SA)</li>
            <li data-detail="SA Construction Regulations updated, improving site safety standards."><i class="fas fa-landmark list-icon"></i>2014: Construction Regs (SA)</li>
            </ul>
        </div>
      </aside>
    </div>
  </div>

  <footer>
    <p>&copy; <span id="copyright-year"></span> SafetyHelp. All rights reserved. Your Partner in Occupational Health and Safety Compliance.</p>
    <p><a href="/SafetyHelp/privacy.html">Privacy Policy</a> | <a href="/SafetyHelp/terms.html">Terms of Service</a> | <a href="/SafetyHelp/contact.html">Contact Us</a></p>
  </footer>

  <div id="infoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="modalTitle">Milestone Detail</h4>
        <span class="close-btn" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer">
        <button onclick="closeModal()" class="action-button-secondary"><i class="fas fa-times mr-2"></i>Close</button>
      </div>
    </div>
  </div>

  <div class="chatbot-container">
      <div id="chat-window" class="chat-hidden">
          <div id="chat-header">
              <span>Salatiso - Your OHS Assistant</span>
              <button class="close-chat-btn" onclick="toggleChatbot(false)">&times;</button>
          </div>
          <div id="chat-output">
              <p><strong>Salatiso:</strong> Hello! How can I help you with OHS today?</p>
          </div>
          <div id="chat-input-container">
              <input id="chat-input" type="text" placeholder="Ask about OHS...">
              <button id="chat-send"><i class="fas fa-paper-plane"></i></button>
          </div>
      </div>
      <button id="chat-toggle" onclick="toggleChatbot()">
          <i class="fas fa-headset"></i>
      </button>
  </div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Set current year in footer
    document.getElementById('copyright-year').textContent = new Date().getFullYear();

    // --- Sidebar Milestone Modal Functionality (from about.html) ---
    const modal = document.getElementById('infoModal');
    const modalTitleEl = document.getElementById('modalTitle');
    const modalBodyEl = document.getElementById('modalBody');

    document.querySelectorAll('#ohs-milestones-list li').forEach(item => {
      item.addEventListener('click', () => {
        const title = item.textContent.trim().replace(/^.*? /, ''); // Get text after icon
        const detail = item.dataset.detail || "More information about this milestone will be available soon.";
        if (modalTitleEl) modalTitleEl.textContent = `OHS Milestone: ${title}`;
        if (modalBodyEl) modalBodyEl.innerHTML = `<p>${detail}</p>`;
        if (modal) modal.style.display = 'block';
      });
    });

    window.closeModal = function() {
      if (modal) modal.style.display = 'none';
    }
    window.onclick = function(event) {
      if (event.target == modal) {
        closeModal();
      }
    }

    // --- Chatbot Functionality (from about.html) ---
    const chatWindow = document.getElementById('chat-window');
    const chatToggleBtn = document.getElementById('chat-toggle');
    const chatInputEl = document.getElementById('chat-input');
    const chatSendBtn = document.getElementById('chat-send');
    const chatOutputEl = document.getElementById('chat-output');

    window.toggleChatbot = function(forceOpen) {
      if (!chatWindow || !chatToggleBtn) return;
      const isHidden = chatWindow.classList.contains('chat-hidden');
      if (forceOpen === true || isHidden) {
          chatWindow.classList.remove('chat-hidden');
          chatWindow.classList.add('chat-expanded');
          chatToggleBtn.innerHTML = '<i class="fas fa-times"></i>';
          if (chatInputEl) chatInputEl.focus();
      } else if (forceOpen === false || !isHidden) {
          chatWindow.classList.add('chat-hidden');
          chatWindow.classList.remove('chat-expanded');
          chatToggleBtn.innerHTML = '<i class="fas fa-headset"></i>';
      }
    }

    function addChatMessageToUI(sender, message, isUser) {
        if (!chatOutputEl) return;
        const messageEl = document.createElement('p');
        messageEl.innerHTML = `<strong>${sender}:</strong> ${message}`;
        if(isUser) messageEl.style.textAlign = "right"; // Basic styling for user messages
        chatOutputEl.appendChild(messageEl);
        chatOutputEl.scrollTop = chatOutputEl.scrollHeight; // Scroll to bottom
    }

    async function handleChatSend() {
        if (!chatInputEl || !chatOutputEl) return;
        const message = chatInputEl.value.trim();
        if (!message) return;

        addChatMessageToUI("You", message, true);
        chatInputEl.value = '';

        // Placeholder bot response
        let botResponse = "I'm processing your request... For complex queries, please refer to our detailed resources or contact support.";
        if (message.toLowerCase().includes("hello") || message.toLowerCase().includes("hi")) {
            botResponse = "Hello there! How can I assist you with your OHS needs today?";
        } else if (message.toLowerCase().includes("construction compliance")) {
            botResponse = "For Construction Compliance, you can use our automated wizard or manual selection tools. What specific document are you looking for?";
        }
        
        setTimeout(() => { // Simulate API call delay
            addChatMessageToUI("Salatiso", botResponse, false);
        }, 500 + Math.random() * 500);
    }

    if (chatSendBtn) chatSendBtn.addEventListener('click', handleChatSend);
    if (chatInputEl) {
      chatInputEl.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
              handleChatSend();
          }
      });
    }
    // Ensure chat is hidden initially
    if (chatWindow) chatWindow.classList.add('chat-hidden');


    // --- Subpage Specific Logic ---
    const showWizardBtn = document.getElementById('show-wizard-btn');
    const showManualBtn = document.getElementById('show-manual-btn');
    const automatedWizardSection = document.getElementById('automated-wizard-section');
    const manualSelectionSection = document.getElementById('manual-selection-section');
    const interactionChoiceSection = document.getElementById('interaction-choice-section');

    const wizardSteps = document.querySelectorAll('.wizard-step');
    let currentWizardStep = 0;

    function showWizardStep(stepIndex) {
        wizardSteps.forEach((step, index) => {
            step.classList.toggle('hidden', index !== stepIndex);
        });
        currentWizardStep = stepIndex;
        // Update dynamic content based on step, e.g., role selection
        if (stepIndex === 3) { // Step 4: Module-Specific Options
            const userRole = document.getElementById('user-role').value;
            document.getElementById('client-options').classList.toggle('hidden', userRole !== 'client');
            document.getElementById('contractor-options').classList.toggle('hidden', userRole !== 'contractor');
            // Add more conditions for other roles
            const rolePlaceholder = document.getElementById('role-specific-options-placeholder');
            if(rolePlaceholder) rolePlaceholder.textContent = `Based on your role as a ${userRole || 'selected role'}, you can compile the following:`;

        }
    }

    if (showWizardBtn) {
      showWizardBtn.addEventListener('click', () => {
        if (automatedWizardSection) automatedWizardSection.classList.remove('hidden');
        if (manualSelectionSection) manualSelectionSection.classList.add('hidden');
        if (interactionChoiceSection) interactionChoiceSection.classList.add('hidden');
        showWizardStep(0); // Show first step of wizard
      });
    }

    if (showManualBtn) {
      showManualBtn.addEventListener('click', () => {
        if (manualSelectionSection) manualSelectionSection.classList.remove('hidden');
        if (automatedWizardSection) automatedWizardSection.classList.add('hidden');
        if (interactionChoiceSection) interactionChoiceSection.classList.add('hidden');
        // Hide specific manual item form if it was open
        if(document.getElementById('manual-item-form-section')) document.getElementById('manual-item-form-section').classList.add('hidden');
        if(document.getElementById('manual-options-list')) document.getElementById('manual-options-list').classList.remove('hidden');

      });
    }

    // Wizard Navigation
    document.querySelectorAll('.wizard-next-btn').forEach(button => {
      button.addEventListener('click', () => {
        // Add validation logic here for currentWizardStep if needed
        if (currentWizardStep < wizardSteps.length - 1) {
          showWizardStep(currentWizardStep + 1);
        }
      });
    });

    document.querySelectorAll('.wizard-prev-btn').forEach(button => {
      button.addEventListener('click', () => {
        if (currentWizardStep > 0) {
          showWizardStep(currentWizardStep - 1);
        } else { // If on first step of wizard, go back to main choice
            if (automatedWizardSection) automatedWizardSection.classList.add('hidden');
            if (interactionChoiceSection) interactionChoiceSection.classList.remove('hidden');
        }
      });
    });
    
    // "Compiling for another party" visibility toggle in Wizard
    const compilingForSelect = document.getElementById('compiling-for');
    const anotherPartyDetailsDiv = document.getElementById('another-party-details');
    if(compilingForSelect && anotherPartyDetailsDiv) {
        compilingForSelect.addEventListener('change', function() {
            anotherPartyDetailsDiv.classList.toggle('hidden', this.value !== 'another');
        });
    }

    // "Compiling for another party" visibility toggle in Manual Form
    const manualCompilingForSelect = document.getElementById('manual-compiling-for');
    const manualAnotherPartyDetailsDiv = document.getElementById('manual-another-party-details');
     if(manualCompilingForSelect && manualAnotherPartyDetailsDiv) {
        manualCompilingForSelect.addEventListener('change', function() {
            manualAnotherPartyDetailsDiv.classList.toggle('hidden', this.value !== 'another');
        });
    }


    // Manual Selection Item Click
    const manualItemFormSection = document.getElementById('manual-item-form-section');
    const manualItemTitle = document.getElementById('manual-item-title');
    const manualOptionsList = document.getElementById('manual-options-list');

    document.querySelectorAll('.manual-select-item-btn').forEach(button => {
        button.addEventListener('click', function() {
            const itemName = this.closest('div').querySelector('h4').textContent;
            if (manualItemTitle) manualItemTitle.textContent = `Provide Details for ${itemName}`;
            // Placeholder: In a real app, you'd load specific form fields for data-item
            if (document.getElementById('manual-item-form-placeholder')) {
                 document.getElementById('manual-item-form-placeholder').innerHTML = `
                    <div class="form-group"><label for="manual-project-name">Project Name:</label><input type="text" id="manual-project-name" class="p-2 border rounded-md w-full"></div>
                    <div class="form-group"><label for="manual-site-details">Site Details:</label><textarea id="manual-site-details" rows="3" class="p-2 border rounded-md w-full"></textarea></div>
                    `;
            }
            if (manualItemFormSection) manualItemFormSection.classList.remove('hidden');
            if (manualOptionsList) manualOptionsList.classList.add('hidden');
        });
    });

    // Manual Form Back Button
    const manualFormBackBtn = document.getElementById('manual-form-back-btn');
    if (manualFormBackBtn) {
        manualFormBackBtn.addEventListener('click', () => {
            if (manualItemFormSection) manualItemFormSection.classList.add('hidden');
            if (manualOptionsList) manualOptionsList.classList.remove('hidden');
        });
    }
    
    // Placeholder for Generate Document buttons
    const generateDocBtnWizard = document.getElementById('generate-document-btn');
    if(generateDocBtnWizard) {
        generateDocBtnWizard.addEventListener('click', () => {
            alert('Wizard Document Generation Initiated (Placeholder)!');
            // Here you would collect all wizard form data and process it
        });
    }
    const generateDocBtnManual = document.getElementById('manual-generate-document-btn');
    if(generateDocBtnManual) {
        generateDocBtnManual.addEventListener('click', () => {
            alert('Manual Document Generation Initiated (Placeholder)!');
            // Here you would collect manual form data and process it
        });
    }

  });
</script>
</body>
</html>
